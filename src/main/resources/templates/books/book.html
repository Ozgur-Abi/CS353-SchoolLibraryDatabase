<!DOCTYPE html>
<html>

<head>
	<link th:href="@{/css/reservation_requests.css}" rel="stylesheet" />
	<title>View Reservation Requests</title>
</head>
	<body>
	<div th:replace="navbar/show :: navbar" ></div>
		<span class="bookInfoPanel">
			<ul class="info">
			<li th:text="'Title: ' + ${book.title}"></li>
			<li th:text="'Author: ' + ${book.author}"></li>
			<li th:text="'Genre: ' + ${book.genre}"></li>
			<li th:text="'Publication Year: ' + ${book.published_year}"></li>
			<li th:text="'Publisher: ' + ${book.publisher}"></li>
			<li th:text="'Language: ' + ${book.language}"></li>
			<li th:text="'ISBN: ' + ${book.isbn}"></li>
			<li th:text="'ISSN: ' + ${book.issn}"></li>
			<li th:text="'Minimum Rating: ' + ${minScore} + '    Maximum Rating: ' + ${maxScore}"></li>
			</ul>
		</span>
		
		<span class="bookButtonPanel">
			<span th:text="${availability}" class="availableLabel" ></span>
			<form th:if="${availability == 'Borrowable'}" id="bookRequest" th:action="@{/books/book/{id}/book_borrow(id=${book.id})}" method="post">
				<div>
					<input class="bookButton" type="submit" value="Borrow">
				</div>
			</form>
			
			<form th:if="${availability == 'Reserveable'}" id="bookRequest" th:action="@{/books/book/{id}/book_reserve(id=${book.id})}" method="post">
				<div>
					<input class="bookButton" type="submit" value="Reserve">
				</div>
			</form>
			
			<form th:if="${availability == 'Borrowed'}" id="bookRequest" th:action="@{/books/book/{id}/book_return(id=${book.id})}" method="post">
				<div>
					<input class="bookButton" type="submit" value="Return">
				</div>
			</form>
			
			<form th:if="${availability == 'Reserved'}" id="bookRequest" th:action="@{/books/book/{id}/book_unreserve(id=${book.id})}" method="post">
				<div>
					<input class="bookButton" type="submit" value="Cancel Res">
				</div>
			</form>
			
			<span th:if="${rateable == 'Already Rated'}" th:text="${rateable}" class="availableLabel" ></span>
			
			<form id="bookRequest" th:if="${rateable == 'Rateable'}" th:action="@{/books/book/{id}/book_rate(id=${book.id})}" method="post">
				<div>
					<div>
					<label id="title">Score:</label>
					<span class="ib"> <input type="number" class="formInput" name="score" id="titleInput" min="1" max="5" required/></span>
					</div>
					<div>
					<label id="title">Comment:</label>
					<span class="ib"> <input type="text" class="formInput" name="comment" id="titleInput" required/></span>
					</div>
					<input class="bookButton" type="submit" value="Rate">
				</div>
			</form>
		</span>
		
		<div class="bookRatingPanel">
		<table>
		 <thead>
        <tr>
            <th> Score </th>
            <th> Comment </th>
		</tr>
		</thead>
		<tbody>
		<tr th:if="${ratings.empty}">
            <td colspan="2"> There are no ratings for this book </td>
        </tr>
        <tr th:each="rating : ${ratings}">
            <td><span th:text="${rating.score}"> Score </span></td>
            <td><span th:text="${rating.comment}"> Comment </span></td>
        </tr>
		</tbody>
		</table>
		</div>
	</body>
</html>